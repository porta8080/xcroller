function xCroller(t,e){xCroller.start(t,e)}function xcroller(t,e){new xCroller(t,e)}function BIS(t){this.el=t,this.has=this.source=this.has(t)}xCroller.ready=!1,xCroller.top=0,xCroller.sticky_elements=new Array,xCroller.moving_elements=new Array,xCroller.start=function(t,e){if(xCroller.ready)return void xCroller.run(t,e);var r,o=function(){("jQuery"in window||jQuery)&&(xCroller.ready=!0),xCroller.ready?(clearTimeout(r),$(document).ready(function(){$("document, body, html").scrollTop(0),xCroller.run(t,e)})):r=setTimeout(function(){r()},250)};o()},function(){var t=!1,e=function(){has_start=!0;var t=document.body.getAttribute("data-xcroller");t&&(t=t.toLowerCase(),(1===t||"1"===t||"true"===t||t===!0||"xcroller"===t)&&xCroller.start())},r=function(){return t?!1:void setTimeout(function(){document.body?e():r()},100)};r()}(),xCroller.run=function(t,e){var r=null,o=null;t&&("string"===jQuery.type(t)?(o=t,e&&(r=e)):(r=t,e&&(o=e))),o||(o=".xcroller"),xCroller.top=0;var i,n,l,a,s,c,u,h,g,d,f,x,p,m,w,I,y,C,v,S,B,b,k,z,R,_=1;$(o).each(function(){m=$(this),b=m.attr("data-sticky"),b?b=b.toLowerCase():r&&"sticky"in r&&(b=r.sticky),1===b||"1"===b||"true"===b||b===!0?(z=m.next(),R=parseInt(z.css("margin-top").replace("px","")),R+=m.outerHeight(!0),z.css("margin-top",R),B=m.offset(),m.css("width",m.width()),m.css("position","absolute"),m.css("left",B.left),m.css("top",B.top),m.css("z-index",-1),xCroller.sticky_elements.push(m)):(k=m.attr("data-fixed"),k?k=k.toLowerCase():r&&"fixed"in r&&(k=r.fixed),1===k||"1"===k||"true"===k||k===!0?(m.css("background-attachment","fixed"),m.css("background-size","cover"),m.css("background-position","center center")):(m.css("position","relative"),m.css("z-index",_),m.css("background-repeat","repeat"),I=new BIS(m),I.has&&I.get(function(t,e){m=e.el,f=m.attr("data-horizontal"),f=f?parseFloat(f):e&&"horizontal"in e?e.horizontal:0,d=m.attr("data-vertical"),d=d?parseFloat(d)/10:e&&"vertical"in e?e.vertical:1+_/10,s=m.attr("data-infinite"),s||e&&"infinite"in e&&(s=e.infinite),s=1===s||"1"===s||"true"===s||s===!0?!0:!1,x=m.outerWidth(),p=m.outerHeight(),f>0?(c=S=0,u=x-t.width):(c=S=x-t.width,u=0),d>0?(h=v=0,g=p-t.height):(h=v=p-t.height,g=0),m.css("background-position",S+"px "+v+"px"),xCroller.moving_elements.push([m,-1*f,-1*d,S,v,0,0,0,0,t.width,t.height,S,v,x,p,s,c,u,h,g])},{el:m}))),_++}),i=$(window),i.scroll(function(){y=i.scrollTop();for(w in xCroller.moving_elements)if(C=xCroller.moving_elements[w],m=C[0],n=xCroller.isOnViewport(m)){a=C[5],l=C[6],C[8]<y?(l++,a++):C[8]>y&&(l--,a--),C[8]=y,cx=C[3]+Math.floor(a*C[1]),C[15]?C[5]=a:C[1]>0?cx<C[16]||cx>C[17]?cx=C[11]:C[5]=a:C[1]<0&&(cx>C[16]||cx<C[17])?cx=C[11]:C[5]=a,cy=C[4]+Math.floor(l*C[2]),C[15]?C[6]=l:C[2]>0?cy<C[18]||cy>C[19]?cy=C[12]:C[6]=l:C[2]<0&&(cy>C[18]||cy<C[19])?cy=C[12]:C[6]=l,C[11]=cx,C[12]=cy;var t=cx+"px "+cy+"px";m.css({"background-position":t,"-moz-background-position":t})}for(w in xCroller.sticky_elements)C=xCroller.sticky_elements[w],C.css({transform:"translateY("+y+"px)","-moz-transform":"translateY("+y+"px)"})}),xCroller.selector=null},xCroller.isOnViewport=function(t){var e=$(window).width(),r=$(window).height(),o=$(window).scrollTop(),i=o+r,n=$(window).scrollLeft(),l=n+e,a=xCroller.boundaries(t);return a.top<i&&a.bottom>o&&a.left<l&&a.right>n?$(t).get(0).getBoundingClientRect():!1},xCroller.boundaries=function(t){var e=t.offset(),r=e.top,o=r+t.outerHeight(),i=e.left,n=i+t.outerWidth();return{left:i,right:n,top:r,bottom:o}},BIS.prototype.has=function(){return BIS.has(this.el)},BIS.has=function(t){var e=t.css("background-image");if(!e||"none"==e.toLowerCase())return!1;if(0===e.indexOf("url(")&&e.indexOf(")")===e.length-1){var r=e.slice(4,e.length-1);return'"'==r[0]||"'"==r[0]?r.slice(1,r.length-1):r}return e},BIS.prototype.getImageRatio=function(t,e){return this.source?void BIS.getImageRatio(this.source,t,e):null},BIS.prototype.getElementRatio=function(t,e){var r=BIS.getElementRatio(this.el,t,e);return t?void 0:r},BIS.getElementRatio=function(t,e,r){var o=t.outerWidth()/t.outerHeight();return e?void e(o,r):o},BIS.getImageRatio=function(t,e){BIS.getImageSize(t,function(t,r){e(t.width/t.height,r)})},BIS.prototype.getImageSize=function(t,e){this.source||t(null,e),BIS.getImageSize(this.source,t,e)},BIS.getImageSize=function(t,e,r){var o=new Image;o.onload=function(){e({width:o.width,height:o.height},r)},o.src=t},BIS.prototype.get=function(t,e){BIS.get(this.el,t,e)},BIS.get=function(t,e,r){if(!t)return null;t=$(t instanceof jQuery?t.get(0):$(t).get(0));var o=BIS.has(t);if(!o)return null;var i,n,l,a,s,c,u=t.css("background-size").toLowerCase(),h={};"cover"==u?BIS.getImageRatio(o,function(o){c=BIS.getElementRatio(t),i=t.outerWidth(),n=t.outerHeight(),c>=o?(h.width=i,h.height=Math.floor(i/o)):(h.width=n*o,h.height=n),e(h,r)}):"contain"==u?BIS.getImageRatio(o,function(o){c=BIS.getElementRatio(t),i=t.outerWidth(),n=t.outerHeight(),c>=o?(h.width=n*o,h.height=n):(h.width=i,h.height=Math.floor(i/o)),e(h,r)}):"auto"==u||"initial"==u||"auto auto"==u?BIS.getImageSize(o,function(t){e(t,r)}):-1!=u.indexOf("%")||-1!=u.indexOf("px")?BIS.getImageSize(o,function(o){var c=function(t,e,r){return e/t*r};s=u.split(" "),1==s.length&&(s[1]="auto"),"auto"==s[0].toLowerCase()?h.width=o.width:-1!=u.indexOf("%")?(l=parseInt(s[0].replace("%","")),i=t.outerWidth(),h.width=c(100,i,l)):h.width=parseInt(s[0].replace("px","")),"auto"==s[1].toLowerCase()?h.height=o.height:-1!=u.indexOf("%")?(a=parseInt(s[1].replace("%","")),n=t.outerHeight(),h.height=c(100,n,a)):h.height=parseInt(s[1].replace("px","")),e(h,r)}):e({width:t.outerWidth(),height:t.outerHeight()},r)};
