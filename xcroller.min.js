function xCroller(t,e){xCroller.start(t,e)}function xcroller(t,e){new xCroller(t,e)}function BIS(t){this.el=t,this.has=this.source=this.has(t)}xCroller.ready=!1,xCroller.top=0,xCroller.sticky=new Array,xCroller.moving=new Array,xCroller.start=function(t,e){if(xCroller.ready)return void xCroller.run(t,e);var o,i=function(){("jQuery"in window||jQuery)&&(xCroller.ready=!0),xCroller.ready?(clearTimeout(o),$(document).ready(function(){$("document, body, html").scrollTop(0),xCroller.run(t,e)})):o=setTimeout(function(){o()},250)};i()},function(){var t=!1,e=function(){has_start=!0;var t=document.body.getAttribute("data-xcroller");t&&(t=t.toLowerCase(),(1===t||"1"===t||"true"===t||t===!0||"xcroller"===t)&&xCroller.start())},o=function(){return t?!1:void setTimeout(function(){document.body?e():o()},100)};o()}(),xCroller.run=function(t,e){var o=null,i=null;t&&("string"===jQuery.type(t)?(i=t,e&&(o=e)):(o=t,e&&(i=e))),i||(i=".xcroller"),xCroller.top=0;var r,n,s,a,l,c,u,h,g,d,p,x,f,w,I,m,y,v,C,S,B,b,z,k,R,H,O,L=1;$(i).each(function(){v=$(this),O=v.attr("data-xcmode"),!O&&o&&(O=o.mode),O||(O="moving"),O=O.toLowerCase(),"sticky"==O?(R=v.next(),H=parseInt(R.css("margin-top").replace("px","")),H+=v.outerHeight(!0),R.css("margin-top",H),k=v.offset(),u=k.top,h=k.left,v.css("width",v.width()),v.css("position","absolute"),v.css("left",h),v.css("top",u),r=0,v.siblings().each(function(){l=$(this).css("z-index"),c=$(this).css("position"),l&&"auto"!=l||$(this).css("z-index",r),"absolute"!=c&&"fixed"!=c&&"relative"!=c&&$(this).css("position","relative"),r++}),xCroller.sticky.push([v,h,u,h,u,0])):"moving"==O||"infinite"==O?(v.css("position","relative"),v.css("z-index",L),v.css("background-repeat","repeat"),S=new BIS(v),S.has&&S.get(function(t,e){v=e.el,L=e.index,I=v.attr("data-xchs"),I||(I=v.attr("data-xchorizontal")),I=I?parseFloat(I):e?"hs"in e?e.hs:"horizontal"in e?e.horizontal:0:0,w=v.attr("data-xcvs"),w||(w=v.attr("data-xcvertical")),w=w?parseFloat(w):e?"vs"in e?e.vs:"vertical"in e?e.vertical:1+L:1+L,g="infinite"==O?!0:!1,n=v.attr("data-xcaxis"),!n&&e&&"axis"in e&&(n=e.axis),n=1===n||"1"===n||"true"===n||n===!0?!0:!1,n=!0,m=v.outerWidth(),y=v.outerHeight(),I>0?(d=z=0,p=m-t.width):(d=z=m-t.width,p=0),w>0?(x=b=0,f=y-t.height):(x=b=y-t.height,f=0),v.css("background-position",z+"px "+b+"px"),xCroller.moving.push([v,-1*I,-1*w,z,b,0,0,0,0,t.width,t.height,z,b,m,y,g,d,p,x,f,n])},{el:v,index:L})):"fixed"==O&&(v.css("background-attachment","fixed"),v.css("background-size","cover"),v.css("background-position","center center")),L++}),s=$(window),s.scroll(function(){posy=s.scrollTop();for(C in xCroller.moving)if(B=xCroller.moving[C],v=B[0],a=xCroller.isOnViewport(v)){B[20]&&(pos=posy),h=B[5],u=B[6],B[8]<pos?(u++,h++):B[8]>pos&&(u--,h--),B[8]=pos,cx=B[3]+Math.floor(h*B[1]),B[15]?B[5]=h:B[1]>0?cx<B[16]||cx>B[17]?cx=B[11]:B[5]=h:B[1]<0&&(cx>B[16]||cx<B[17])?cx=B[11]:B[5]=h,cy=B[4]+Math.floor(u*B[2]),B[15]?B[6]=u:B[2]>0?cy<B[18]||cy>B[19]?cy=B[12]:B[6]=u:B[2]<0&&(cy>B[18]||cy<B[19])?cy=B[12]:B[6]=u,B[11]=cx,B[12]=cy;var t=cx+"px "+cy+"px";v.css({"background-position":t,"-moz-background-position":t}),xCroller.moving[C]=B}for(C in xCroller.sticky)B=xCroller.sticky[C],u=B[0].offset().top,posy>B[5]?posy>B[2]&&(B[0].css("position","fixed"),B[0].css("top","0")):posy<B[5]&&posy<B[2]&&(B[0].css("position","absolute"),B[0].css("top",B[2])),B[5]=posy}),xCroller.selector=null},xCroller.isOnViewport=function(t){var e=$(window).width(),o=$(window).height(),i=$(window).scrollTop(),r=i+o,n=$(window).scrollLeft(),s=n+e,a=xCroller.boundaries(t);return a.top<r&&a.bottom>i&&a.left<s&&a.right>n?$(t).get(0).getBoundingClientRect():!1},xCroller.boundaries=function(t){var e=t.offset(),o=e.top,i=o+t.outerHeight(),r=e.left,n=r+t.outerWidth();return{left:r,right:n,top:o,bottom:i}},BIS.prototype.has=function(){return BIS.has(this.el)},BIS.has=function(t){var e=t.css("background-image");if(!e||"none"==e.toLowerCase())return!1;if(0===e.indexOf("url(")&&e.indexOf(")")===e.length-1){var o=e.slice(4,e.length-1);return'"'==o[0]||"'"==o[0]?o.slice(1,o.length-1):o}return e},BIS.prototype.getImageRatio=function(t,e){return this.source?void BIS.getImageRatio(this.source,t,e):null},BIS.prototype.getElementRatio=function(t,e){var o=BIS.getElementRatio(this.el,t,e);return t?void 0:o},BIS.getElementRatio=function(t,e,o){var i=t.outerWidth()/t.outerHeight();return e?void e(i,o):i},BIS.getImageRatio=function(t,e){BIS.getImageSize(t,function(t,o){e(t.width/t.height,o)})},BIS.prototype.getImageSize=function(t,e){this.source||t(null,e),BIS.getImageSize(this.source,t,e)},BIS.getImageSize=function(t,e,o){var i=new Image;i.onload=function(){e({width:i.width,height:i.height},o)},i.src=t},BIS.prototype.get=function(t,e){BIS.get(this.el,t,e)},BIS.get=function(t,e,o){if(!t)return null;t=$(t instanceof jQuery?t.get(0):$(t).get(0));var i=BIS.has(t);if(!i)return null;var r,n,s,a,l,c,u=t.css("background-size").toLowerCase(),h={};"cover"==u?BIS.getImageRatio(i,function(i){c=BIS.getElementRatio(t),r=t.outerWidth(),n=t.outerHeight(),c>=i?(h.width=r,h.height=Math.floor(r/i)):(h.width=n*i,h.height=n),e(h,o)}):"contain"==u?BIS.getImageRatio(i,function(i){c=BIS.getElementRatio(t),r=t.outerWidth(),n=t.outerHeight(),c>=i?(h.width=n*i,h.height=n):(h.width=r,h.height=Math.floor(r/i)),e(h,o)}):"auto"==u||"initial"==u||"auto auto"==u?BIS.getImageSize(i,function(t){e(t,o)}):-1!=u.indexOf("%")||-1!=u.indexOf("px")?BIS.getImageSize(i,function(i){var c=function(t,e,o){return e/t*o};l=u.split(" "),1==l.length&&(l[1]="auto"),"auto"==l[0].toLowerCase()?h.width=i.width:-1!=u.indexOf("%")?(s=parseInt(l[0].replace("%","")),r=t.outerWidth(),h.width=c(100,r,s)):h.width=parseInt(l[0].replace("px","")),"auto"==l[1].toLowerCase()?h.height=i.height:-1!=u.indexOf("%")?(a=parseInt(l[1].replace("%","")),n=t.outerHeight(),h.height=c(100,n,a)):h.height=parseInt(l[1].replace("px","")),e(h,o)}):e({width:t.outerWidth(),height:t.outerHeight()},o)};
