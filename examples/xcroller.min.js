function xCroller(t,e){xCroller.start(t,e)}function xcroller(t,e){new xCroller(t,e)}function BIS(t){this.el=t,this.has=this.source=this.has(t)}xCroller.ready=!1,xCroller.top=0,xCroller.sticky=new Array,xCroller.moving=new Array,xCroller.attached_scroll=!1,xCroller.start=function(t,e){if(xCroller.ready)return void xCroller.run(t,e);var o,r=function(){("jQuery"in window||jQuery)&&$("body").length&&(xCroller.ready=!0),xCroller.ready?(clearTimeout(o),$(document).ready(function(){$("document, body, html").scrollTop(0),xCroller.run(t,e)})):o=setTimeout(function(){r()},250)};r()},function(){var t=!1,e=function(){has_start=!0;var t=document.body.getAttribute("data-xcroller");t&&(t=t.toLowerCase(),(1===t||"1"===t||"true"===t||t===!0||"xcroller"===t)&&xCroller.start())},o=function(){return t?!1:void setTimeout(function(){document.body?e():o()},100)};o()}(),xCroller.run=function(t,e){var o=null,r=null;t&&("string"===jQuery.type(t)?(r=t,e&&(o=e)):(o=t,e&&(r=e))),r||(r=".xcroller"),xCroller.top=0;var i,n,s,l,a,c,u,h,g,d,x,p,f,w,y,I,m,v,C,S,B,b,z,k,R,H,O,L,T=1;$(r).each(function(){C=$(this),L=C.attr("data-xcmode"),!L&&o&&(L=o.mode),L||(L="moving"),L=L.toLowerCase(),"sticky"==L?(H=C.next(),O=parseInt(H.css("margin-top").replace("px","")),O+=C.outerHeight(!0),H.css("margin-top",O),R=C.offset(),h=R.top,g=R.left,C.css("width",C.width()),C.css("position","absolute"),C.css("left",g),C.css("top",h),n=0,C.siblings().each(function(){c=$(this).css("z-index"),u=$(this).css("position"),c&&"auto"!=c||$(this).css("z-index",n),"absolute"!=u&&"fixed"!=u&&"relative"!=u&&$(this).css("position","relative"),n++}),xCroller.sticky.push([C,g,h,g,h,0])):"moving"==L||"infinite"==L?(C.css("position","relative"),C.css("z-index",T),C.css("background-repeat","repeat"),B=new BIS(C),B.has&&B.get(function(t,e){C=e.el,T=e.index,I=C.attr("data-xchs"),I||(I=C.attr("data-xchorizontal")),I=I?parseFloat(I):e?"hs"in e?e.hs:"horizontal"in e?e.horizontal:0:0,y=C.attr("data-xcvs"),y||(y=C.attr("data-xcvertical")),y=y?parseFloat(y):e?"vs"in e?e.vs:"vertical"in e?e.vertical:1+T:1+T,d="infinite"==L?!0:!1,s=C.attr("data-xcaxis"),!s&&e&&"axis"in e&&(s=e.axis),s=1===s||"1"===s||"true"===s||s===!0?!0:!1,s=!0,m=C.outerWidth(),v=C.outerHeight(),I>0?(x=k=0,p=m-t.width):0>I?(x=k=m-t.width,p=0):p=k=x=0,y>0?(f=z=0,w=v-t.height):(f=z=v-t.height,w=0),C.css("background-position",k+"px "+z+"px"),xCroller.moving.push([C,-1*I,-1*y,k,z,0,0,0,0,t.width,t.height,k,z,m,v,d,x,p,f,w,s])},{el:C,index:T})):"fixed"==L&&(C.css("background-attachment","fixed"),C.css("background-size","cover"),C.css("background-position","center center")),T++}),xCroller.attached_scroll||(xCroller.attached_scroll=!0,l=$(window),i=l.scrollTop(),l.scroll(function(){posy=l.scrollTop();for(S in xCroller.moving)if(b=xCroller.moving[S],C=b[0],a=xCroller.isOnViewport(C)){b[20]&&(pos=posy),g=b[5],h=b[6],b[8]<pos?(h++,g++):b[8]>pos&&(h--,g--),b[8]=pos,cx=b[3]+Math.floor(g*b[1]),b[15]?b[5]=g:b[1]>0?cx<b[16]||cx>b[17]?cx=b[11]:b[5]=g:b[1]<0&&(cx>b[16]||cx<b[17])?cx=b[11]:b[5]=g,cy=b[4]+Math.floor(h*b[2]),b[15]?b[6]=h:b[2]>0?cy<b[18]||cy>b[19]?cy=b[12]:b[6]=h:b[2]<0&&(cy>b[18]||cy<b[19])?cy=b[12]:b[6]=h,b[11]=cx,b[12]=cy;var t=cx+"px "+cy+"px";C.css({"background-position":t,"-moz-background-position":t}),xCroller.moving[S]=b}for(S in xCroller.sticky)b=xCroller.sticky[S],h=b[0].offset().top,posy>b[5]?posy>b[2]&&(b[0].css("position","fixed"),b[0].css("top","0")):posy<b[5]&&posy<b[2]&&(b[0].css("position","absolute"),b[0].css("top",b[2])),b[5]=posy})),xCroller.selector=null},xCroller.isOnViewport=function(t){var e=$(window).width(),o=$(window).height(),r=$(window).scrollTop(),i=r+o,n=$(window).scrollLeft(),s=n+e,l=xCroller.boundaries(t);return l.top<i&&l.bottom>r&&l.left<s&&l.right>n?$(t).get(0).getBoundingClientRect():!1},xCroller.boundaries=function(t){var e=t.offset(),o=e.top,r=o+t.outerHeight(),i=e.left,n=i+t.outerWidth();return{left:i,right:n,top:o,bottom:r}},BIS.prototype.has=function(){return BIS.has(this.el)},BIS.has=function(t){var e=t.css("background-image");if(!e||"none"==e.toLowerCase())return!1;if(0===e.indexOf("url(")&&e.indexOf(")")===e.length-1){var o=e.slice(4,e.length-1);return'"'==o[0]||"'"==o[0]?o.slice(1,o.length-1):o}return e},BIS.prototype.getImageRatio=function(t,e){return this.source?void BIS.getImageRatio(this.source,t,e):null},BIS.prototype.getElementRatio=function(t,e){var o=BIS.getElementRatio(this.el,t,e);return t?void 0:o},BIS.getElementRatio=function(t,e,o){var r=t.outerWidth()/t.outerHeight();return e?void e(r,o):r},BIS.getImageRatio=function(t,e){BIS.getImageSize(t,function(t,o){e(t.width/t.height,o)})},BIS.prototype.getImageSize=function(t,e){this.source||t(null,e),BIS.getImageSize(this.source,t,e)},BIS.getImageSize=function(t,e,o){var r=new Image;r.onload=function(){e({width:r.width,height:r.height},o)},r.src=t},BIS.prototype.get=function(t,e){BIS.get(this.el,t,e)},BIS.get=function(t,e,o){if(!t)return null;t=$(t instanceof jQuery?t.get(0):$(t).get(0));var r=BIS.has(t);if(!r)return null;var i,n,s,l,a,c,u=t.css("background-size").toLowerCase(),h={};"cover"==u?BIS.getImageRatio(r,function(r){c=BIS.getElementRatio(t),i=t.outerWidth(),n=t.outerHeight(),c>=r?(h.width=i,h.height=Math.floor(i/r)):(h.width=n*r,h.height=n),e(h,o)}):"contain"==u?BIS.getImageRatio(r,function(r){c=BIS.getElementRatio(t),i=t.outerWidth(),n=t.outerHeight(),c>=r?(h.width=n*r,h.height=n):(h.width=i,h.height=Math.floor(i/r)),e(h,o)}):"auto"==u||"initial"==u||"auto auto"==u?BIS.getImageSize(r,function(t){e(t,o)}):-1!=u.indexOf("%")||-1!=u.indexOf("px")?BIS.getImageSize(r,function(r){var c=function(t,e,o){return e/t*o};a=u.split(" "),1==a.length&&(a[1]="auto"),"auto"==a[0].toLowerCase()?h.width=r.width:-1!=u.indexOf("%")?(s=parseInt(a[0].replace("%","")),i=t.outerWidth(),h.width=c(100,i,s)):h.width=parseInt(a[0].replace("px","")),"auto"==a[1].toLowerCase()?h.height=r.height:-1!=u.indexOf("%")?(l=parseInt(a[1].replace("%","")),n=t.outerHeight(),h.height=c(100,n,l)):h.height=parseInt(a[1].replace("px","")),e(h,o)}):e({width:t.outerWidth(),height:t.outerHeight()},o)};
